# Ultimate Lyra Trading System - API Documentation

## Overview
The Ultimate Lyra Trading System provides a comprehensive REST API for all trading operations, portfolio management, and system monitoring.

## Base URL
- Local: `http://localhost:8800`
- Public: `https://3ce37fa57d09.ngrok.app`

## Authentication
All API requests require authentication using one of the following methods:
- API Key in header: `X-API-Key: your_api_key`
- Bearer token: `Authorization: Bearer your_token`

## Core Endpoints

### Health and Status
```
GET /api/health
```
Returns system health status and service availability.

**Response:**
```json
{
  "status": "HEALTHY",
  "timestamp": "2025-10-01T03:57:29.362Z",
  "services": {
    "ai_consensus": "ACTIVE",
    "portfolio_manager": "ACTIVE",
    "exchange_connector": "ACTIVE"
  }
}
```

### Portfolio Management
```
GET /api/portfolio/summary
```
Returns comprehensive portfolio summary with current values and performance.

```
POST /api/portfolio/rebalance
```
Triggers AI-powered portfolio rebalancing based on current market conditions.

### AI Consensus
```
GET /api/ai/consensus
```
Returns current AI consensus analysis and recommendations.

```
POST /api/ai/analyze
```
Triggers new AI analysis for specific trading pair or market condition.

### Trading Operations
```
POST /api/trading/execute
```
Executes trading strategy with specified parameters.

**Request Body:**
```json
{
  "strategy": "market_making",
  "exchange": "okx",
  "symbol": "BTC/USDT",
  "amount": 1000,
  "risk_level": "medium"
}
```

### System Monitoring
```
GET /api/system/metrics
```
Returns real-time system performance metrics.

```
GET /api/system/logs
```
Returns recent system logs and events.

## Error Handling
All API endpoints return standard HTTP status codes:
- 200: Success
- 400: Bad Request
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found
- 500: Internal Server Error

Error responses include detailed error messages:
```json
{
  "error": "Invalid trading pair",
  "code": "INVALID_SYMBOL",
  "timestamp": "2025-10-01T03:57:29.362Z"
}
```

## Rate Limiting
API requests are rate limited to prevent abuse:
- 1000 requests per hour for authenticated users
- 100 requests per hour for unauthenticated requests

## WebSocket API
Real-time data is available via WebSocket connections:
- Portfolio updates: `ws://localhost:8800/ws/portfolio`
- Market data: `ws://localhost:8800/ws/market`
- AI recommendations: `ws://localhost:8800/ws/ai`

---
*API Documentation generated by Ultimate AI Consensus System*
